function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936),d=ff(d,a,b,c,k[1],12,-389564586),c=ff(c,d,a,b,k[2],17,606105819),b=ff(b,c,d,a,k[3],22,-1044525330),a=ff(a,b,c,d,k[4],7,-176418897),d=ff(d,a,b,c,k[5],12,1200080426),c=ff(c,d,a,b,k[6],17,-1473231341),b=ff(b,c,d,a,k[7],22,-45705983),a=ff(a,b,c,d,k[8],7,1770035416),d=ff(d,a,b,c,k[9],12,-1958414417),c=ff(c,d,a,b,k[10],17,-42063),b=ff(b,c,d,a,k[11],22,-1990404162),a=ff(a,b,c,d,k[12],7,1804603682),d=ff(d,a,b,c,k[13],12,-40341101),c=ff(c,d,a,b,k[14],17,-1502002290),b=ff(b,c,d,a,k[15],22,1236535329),a=gg(a,b,c,d,k[1],5,-165796510),d=gg(d,a,b,c,k[6],9,-1069501632),c=gg(c,d,a,b,k[11],14,643717713),b=gg(b,c,d,a,k[0],20,-373897302),a=gg(a,b,c,d,k[5],5,-701558691),d=gg(d,a,b,c,k[10],9,38016083),c=gg(c,d,a,b,k[15],14,-660478335),b=gg(b,c,d,a,k[4],20,-405537848),a=gg(a,b,c,d,k[9],5,568446438),d=gg(d,a,b,c,k[14],9,-1019803690),c=gg(c,d,a,b,k[3],14,-187363961),b=gg(b,c,d,a,k[8],20,1163531501),a=gg(a,b,c,d,k[13],5,-1444681467),d=gg(d,a,b,c,k[2],9,-51403784),c=gg(c,d,a,b,k[7],14,1735328473),b=gg(b,c,d,a,k[12],20,-1926607734),a=hh(a,b,c,d,k[5],4,-378558),d=hh(d,a,b,c,k[8],11,-2022574463),c=hh(c,d,a,b,k[11],16,1839030562),b=hh(b,c,d,a,k[14],23,-35309556),a=hh(a,b,c,d,k[1],4,-1530992060),d=hh(d,a,b,c,k[4],11,1272893353),c=hh(c,d,a,b,k[7],16,-155497632),b=hh(b,c,d,a,k[10],23,-1094730640),a=hh(a,b,c,d,k[13],4,681279174),d=hh(d,a,b,c,k[0],11,-358537222),c=hh(c,d,a,b,k[3],16,-722521979),b=hh(b,c,d,a,k[6],23,76029189),a=hh(a,b,c,d,k[9],4,-640364487),d=hh(d,a,b,c,k[12],11,-421815835),c=hh(c,d,a,b,k[15],16,530742520),b=hh(b,c,d,a,k[2],23,-995338651),a=ii(a,b,c,d,k[0],6,-198630844),d=ii(d,a,b,c,k[7],10,1126891415),c=ii(c,d,a,b,k[14],15,-1416354905),b=ii(b,c,d,a,k[5],21,-57434055),a=ii(a,b,c,d,k[12],6,1700485571),d=ii(d,a,b,c,k[3],10,-1894986606),c=ii(c,d,a,b,k[10],15,-1051523),b=ii(b,c,d,a,k[1],21,-2054922799),a=ii(a,b,c,d,k[8],6,1873313359),d=ii(d,a,b,c,k[15],10,-30611744),c=ii(c,d,a,b,k[6],15,-1560198380),b=ii(b,c,d,a,k[13],21,1309151649),a=ii(a,b,c,d,k[4],6,-145523070),d=ii(d,a,b,c,k[11],10,-1120210379),c=ii(c,d,a,b,k[2],15,718787259),b=ii(b,c,d,a,k[9],21,-343485551),x[0]=add32(a,x[0]),x[1]=add32(b,x[1]),x[2]=add32(c,x[2]),x[3]=add32(d,x[3])}function cmn(q,a,b,x,s,t){return a=add32(add32(a,q),add32(x,t)),add32(a<<s|a>>>32-s,b)}function ff(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)}function md51(s){txt="";var i,n=s.length,state=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=s.length;i+=64)md5cycle(state,md5blk(s.substring(i-64,i)));s=s.substring(i-64);var tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<s.length;i++)tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3);if(tail[i>>2]|=128<<(i%4<<3),i>55)for(md5cycle(state,tail),i=0;i<16;i++)tail[i]=0;return tail[14]=8*n,md5cycle(state,tail),state}function md5blk(s){var i,md5blks=[];for(i=0;i<64;i+=4)md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24);return md5blks}function rhex(n){for(var s="",j=0;j<4;j++)s+=hex_chr[n>>8*j+4&15]+hex_chr[n>>8*j&15];return s}function hex(x){for(var i=0;i<x.length;i++)x[i]=rhex(x[i]);return x.join("")}function md5(s){return hex(md51(s))}function add32(a,b){return a+b&4294967295}function add32(x,y){var lsw=(65535&x)+(65535&y),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|65535&lsw}function sha256(param){return Sha256.hash(param)}function set_cookie(key,val,days){var exdate=new Date;days=void 0!==days?days:7,exdate.setDate(exdate.getDate()+days),document.cookie=key+"="+encodeURIComponent(val)+"; expires="+exdate.toUTCString()+";path=/"}function get_cookie(key){var i,cookies=document.cookie.split(";");for(i in cookies){var split=cookies[i].split("=");if(split[0].trim()==key)return decodeURIComponent(split[1])}return null}function encrypt(str,key){var iv=(new Date).getTime()+"";iv=md5(iv),key=md5(key),str=JSON.stringify(str);var crypt=mcrypt.Encrypt(str,iv,key,"rijndael-256","cbc");return{crypt:btoa(crypt),iv:btoa(iv)}}function decrypt(obj,key){obj="object"==typeof obj?obj:JSON.parse(obj);var dec=mcrypt.Decrypt(atob(obj.crypt),atob(obj.iv),md5(key),"rijndael-256","cbc").trim();return JSON.parse(dec.replace(/\x00*$/,""))}function unique_id(){return _uid++}function get_path(){return location.hash.replace(/^[\#\!]{1,2}/,"")}var mcrypt=mcrypt?mcrypt:new function(){var ciphers={"rijndael-128":[16,32],"rijndael-192":[24,32],"rijndael-256":[32,32],serpent:[16,32]},blockCipherCalls={};blockCipherCalls["rijndael-128"]=function(cipher,block,key,encrypt){return key.length<16?key+=Array(17-key.length).join(String.fromCharCode(0)):key.length<24&&key.length>16?key+=Array(25-key.length).join(String.fromCharCode(0)):key.length<32&&key.length>24&&(key+=Array(33-key.length).join(String.fromCharCode(0))),encrypt?Rijndael.Encrypt(block,key):Rijndael.Decrypt(block,key),block},blockCipherCalls["rijndael-192"]=blockCipherCalls["rijndael-128"],blockCipherCalls["rijndael-256"]=blockCipherCalls["rijndael-128"],blockCipherCalls.serpent=function(cipher,block,key,encrypt){return encrypt?Serpent.Encrypt(block):Serpent.Decrypt(block),block},blockCipherCalls.serpent.init=function(cipher,key,encrypt){for(var keyA=[],i=0;i<key.length;i++)keyA[i]=key.charCodeAt(i);Serpent.Init(keyA)},blockCipherCalls.serpent.deinit=function(cipher,key,encrypt){Serpent.Close()};var pub={};pub.Encrypt=function(message,IV,key,cipher,mode){return pub.Crypt(!0,message,IV,key,cipher,mode)},pub.Decrypt=function(ctext,IV,key,cipher,mode){return pub.Crypt(!1,ctext,IV,key,cipher,mode)},pub.Crypt=function(encrypt,text,IV,key,cipher,mode){if(key?cKey=key:key=cKey,cipher?cCipher=cipher:cipher=cCipher,mode?cMode=mode:mode=cMode,!text)return!0;blockCipherCalls[cipher].init&&blockCipherCalls[cipher].init(cipher,key,encrypt);var blockS=ciphers[cipher][0],chunkS=blockS,iv=new Array(blockS);switch(mode){case"cfb":chunkS=1;case"cbc":case"ncfb":case"nofb":case"ctr":if(!IV)throw"mcrypt.Crypt: IV Required for mode "+mode;if(IV.length!=blockS)throw"mcrypt.Crypt: IV must be "+blockS+" characters long for "+cipher;for(var i=blockS-1;i>=0;i--)iv[i]=IV.charCodeAt(i);break;case"ecb":break;default:throw"mcrypt.Crypt: Unsupported mode of opperation"+cMode}var chunks=Math.ceil(text.length/chunkS),orig=text.length;text+=Array(chunks*chunkS-orig+1).join(String.fromCharCode(0));var out="";switch(mode){case"ecb":for(var i=0;i<chunks;i++){for(var j=0;j<chunkS;j++)iv[j]=text.charCodeAt(i*chunkS+j);blockCipherCalls[cipher](cipher,iv,cKey,encrypt);for(var j=0;j<chunkS;j++)out+=String.fromCharCode(iv[j])}break;case"cbc":if(encrypt)for(var i=0;i<chunks;i++){for(var j=0;j<chunkS;j++)iv[j]=text.charCodeAt(i*chunkS+j)^iv[j];blockCipherCalls[cipher](cipher,iv,cKey,!0);for(var j=0;j<chunkS;j++)out+=String.fromCharCode(iv[j])}else for(var i=0;i<chunks;i++){var temp=iv;iv=new Array(chunkS);for(var j=0;j<chunkS;j++)iv[j]=text.charCodeAt(i*chunkS+j);var decr=iv.slice(0);blockCipherCalls[cipher](cipher,decr,cKey,!1);for(var j=0;j<chunkS;j++)out+=String.fromCharCode(temp[j]^decr[j])}break;case"cfb":for(var i=0;i<chunks;i++){var temp=iv.slice(0);blockCipherCalls[cipher](cipher,temp,cKey,!0),temp=temp[0]^text.charCodeAt(i),iv.push(encrypt?temp:text.charCodeAt(i)),iv.shift(),out+=String.fromCharCode(temp)}out=out.substr(0,orig);break;case"ncfb":for(var i=0;i<chunks;i++){blockCipherCalls[cipher](cipher,iv,cKey,!0);for(var j=0;j<chunkS;j++){var temp=text.charCodeAt(i*chunkS+j);iv[j]=temp^iv[j],out+=String.fromCharCode(iv[j]),encrypt||(iv[j]=temp)}}out=out.substr(0,orig);break;case"nofb":for(var i=0;i<chunks;i++){blockCipherCalls[cipher](cipher,iv,cKey,!0);for(var j=0;j<chunkS;j++)out+=String.fromCharCode(text.charCodeAt(i*chunkS+j)^iv[j])}out=out.substr(0,orig);break;case"ctr":for(var i=0;i<chunks;i++){temp=iv.slice(0),blockCipherCalls[cipher](cipher,temp,cKey,!0);for(var j=0;j<chunkS;j++)out+=String.fromCharCode(text.charCodeAt(i*chunkS+j)^temp[j]);var carry=1,index=chunkS;do index--,iv[index]+=1,carry=iv[index]>>8,iv[index]&=255;while(carry)}out=out.substr(0,orig)}return blockCipherCalls[cipher].deinit&&blockCipherCalls[cipher].deinit(cipher,key,encrypt),out},pub.get_block_size=function(cipher,mode){return cipher||(cipher=cCipher),!!ciphers[cipher]&&ciphers[cipher][0]},pub.get_cipher_name=function(cipher){return cipher||(cipher=cCipher),!!ciphers[cipher]&&cipher},pub.get_iv_size=function(cipher,mode){return cipher||(cipher=cCipher),!!ciphers[cipher]&&ciphers[cipher][0]},pub.get_key_size=function(cipher,mode){return cipher||(cipher=cCipher),!!ciphers[cipher]&&ciphers[cipher][1]},pub.list_algorithms=function(){var ret=[];for(var i in ciphers)ret.push(i);return ret},pub.list_modes=function(){return["ecb","cbc","cfb","ncfb","nofb","ctr"]};var cMode="cbc",cCipher="rijndael-128",cKey="12345678911234567892123456789312";return pub},Rijndael=Rijndael?Rijndael:new function(){var pub={};pub.Encrypt=function(block,key){crypt(block,key,!0)},pub.Decrypt=function(block,key){crypt(block,key,!1)};for(var sizes=[16,24,32],rounds=[[10,12,14],[12,12,14],[14,14,14]],expandedKeys={},ExpandKey=function(key){if(!expandedKeys[key]){var ks,kl=key.length,Rcon=1;ks=480,keyA=new Array(ks);for(var i=0;i<kl;i++)keyA[i]=key.charCodeAt(i);for(var i=kl;i<ks;i+=4){var temp=keyA.slice(i-4,i);i%kl==0?(temp=[Sbox[temp[1]]^Rcon,Sbox[temp[2]],Sbox[temp[3]],Sbox[temp[0]]],(Rcon<<=1)>=256&&(Rcon^=283)):kl>24&&i%kl==16&&(temp=[Sbox[temp[0]],Sbox[temp[1]],Sbox[temp[2]],Sbox[temp[3]]]);for(var j=0;j<4;j++)keyA[i+j]=keyA[i+j-kl]^temp[j]}expandedKeys[key]=keyA}return expandedKeys[key]},crypt=function(block,key,encrypt){var bB=block.length,kB=key.length,bBi=0,kBi=0;switch(bB){case 32:bBi++;case 24:bBi++;case 16:break;default:throw"rijndael: Unsupported block size: "+block.length}switch(kB){case 32:kBi++;case 24:kBi++;case 16:break;default:throw"rijndael: Unsupported key size: "+key.length}var r=rounds[bBi][kBi];key=ExpandKey(key);var end=r*bB;if(encrypt){AddRoundKey(block,key.slice(0,bB));for(var SRT=ShiftRowTab[bBi],i=bB;i<end;i+=bB)SubBytes(block,Sbox),ShiftRows(block,SRT),MixColumns(block),AddRoundKey(block,key.slice(i,i+bB));SubBytes(block,Sbox),ShiftRows(block,SRT),AddRoundKey(block,key.slice(i,i+bB))}else{AddRoundKey(block,key.slice(end,end+bB));var SRT=ShiftRowTab_Inv[bBi];ShiftRows(block,SRT),SubBytes(block,Sbox_Inv);for(var i=end-bB;i>=bB;i-=bB)AddRoundKey(block,key.slice(i,i+bB)),MixColumns_Inv(block),ShiftRows(block,SRT),SubBytes(block,Sbox_Inv);AddRoundKey(block,key.slice(0,bB))}},Sbox=new Array(99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22),rowshifts=[[0,1,2,3],[0,1,2,3],[0,1,3,4]],ShiftRowTab=Array(3),i=0;i<3;i++){ShiftRowTab[i]=Array(sizes[i]);for(var j=sizes[i];j>=0;j--)ShiftRowTab[i][j]=(j+(rowshifts[i][3&j]<<2))%sizes[i]}for(var Sbox_Inv=new Array(256),i=0;i<256;i++)Sbox_Inv[Sbox[i]]=i;for(var ShiftRowTab_Inv=Array(3),i=0;i<3;i++){ShiftRowTab_Inv[i]=Array(sizes[i]);for(var j=sizes[i];j>=0;j--)ShiftRowTab_Inv[i][ShiftRowTab[i][j]]=j}for(var xtime=new Array(256),i=0;i<128;i++)xtime[i]=i<<1,xtime[128+i]=i<<1^27;var SubBytes=function(state,sbox){for(var i=state.length-1;i>=0;i--)state[i]=sbox[state[i]]},AddRoundKey=function(state,rkey){for(var i=state.length-1;i>=0;i--)state[i]^=rkey[i]},ShiftRows=function(state,shifttab){for(var h=state.slice(0),i=state.length-1;i>=0;i--)state[i]=h[shifttab[i]]},MixColumns=function(state){for(var i=state.length-4;i>=0;i-=4){var s0=state[i+0],s1=state[i+1],s2=state[i+2],s3=state[i+3],h=s0^s1^s2^s3;state[i+0]^=h^xtime[s0^s1],state[i+1]^=h^xtime[s1^s2],state[i+2]^=h^xtime[s2^s3],state[i+3]^=h^xtime[s3^s0]}},MixColumns_Inv=function(state){for(var i=state.length-4;i>=0;i-=4){var s0=state[i+0],s1=state[i+1],s2=state[i+2],s3=state[i+3],h=s0^s1^s2^s3,xh=xtime[h],h1=xtime[xtime[xh^s0^s2]]^h,h2=xtime[xtime[xh^s1^s3]]^h;state[i+0]^=h1^xtime[s0^s1],state[i+1]^=h2^xtime[s1^s2],state[i+2]^=h1^xtime[s2^s3],state[i+3]^=h2^xtime[s3^s0]}};return pub},hex_chr="0123456789abcdef".split("");"5d41402abc4b2a76b9719d911017c592"!=md5("hello");var Sha256={};Sha256.hash=function(msg){msg=msg.utf8Encode();var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],H=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];msg+=String.fromCharCode(128);for(var l=msg.length/4+2,N=Math.ceil(l/16),M=new Array(N),i=0;i<N;i++){M[i]=new Array(16);for(var j=0;j<16;j++)M[i][j]=msg.charCodeAt(64*i+4*j)<<24|msg.charCodeAt(64*i+4*j+1)<<16|msg.charCodeAt(64*i+4*j+2)<<8|msg.charCodeAt(64*i+4*j+3)}M[N-1][14]=8*(msg.length-1)/Math.pow(2,32),M[N-1][14]=Math.floor(M[N-1][14]),M[N-1][15]=8*(msg.length-1)&4294967295;for(var a,b,c,d,e,f,g,h,W=new Array(64),i=0;i<N;i++){for(var t=0;t<16;t++)W[t]=M[i][t];for(var t=16;t<64;t++)W[t]=Sha256.σ1(W[t-2])+W[t-7]+Sha256.σ0(W[t-15])+W[t-16]&4294967295;a=H[0],b=H[1],c=H[2],d=H[3],e=H[4],f=H[5],g=H[6],h=H[7];for(var t=0;t<64;t++){var T1=h+Sha256.Σ1(e)+Sha256.Ch(e,f,g)+K[t]+W[t],T2=Sha256.Σ0(a)+Sha256.Maj(a,b,c);h=g,g=f,f=e,e=d+T1&4294967295,d=c,c=b,b=a,a=T1+T2&4294967295}H[0]=H[0]+a&4294967295,H[1]=H[1]+b&4294967295,H[2]=H[2]+c&4294967295,H[3]=H[3]+d&4294967295,H[4]=H[4]+e&4294967295,H[5]=H[5]+f&4294967295,H[6]=H[6]+g&4294967295,H[7]=H[7]+h&4294967295}return Sha256.toHexStr(H[0])+Sha256.toHexStr(H[1])+Sha256.toHexStr(H[2])+Sha256.toHexStr(H[3])+Sha256.toHexStr(H[4])+Sha256.toHexStr(H[5])+Sha256.toHexStr(H[6])+Sha256.toHexStr(H[7])},Sha256.ROTR=function(n,x){return x>>>n|x<<32-n},Sha256.Σ0=function(x){return Sha256.ROTR(2,x)^Sha256.ROTR(13,x)^Sha256.ROTR(22,x)},Sha256.Σ1=function(x){return Sha256.ROTR(6,x)^Sha256.ROTR(11,x)^Sha256.ROTR(25,x)},Sha256.σ0=function(x){return Sha256.ROTR(7,x)^Sha256.ROTR(18,x)^x>>>3},Sha256.σ1=function(x){return Sha256.ROTR(17,x)^Sha256.ROTR(19,x)^x>>>10},Sha256.Ch=function(x,y,z){return x&y^~x&z},Sha256.Maj=function(x,y,z){return x&y^x&z^y&z},Sha256.toHexStr=function(n){for(var v,s="",i=7;i>=0;i--)v=n>>>4*i&15,s+=v.toString(16);return s},"undefined"==typeof String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),"undefined"==typeof String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(e){return this}}),"undefined"!=typeof module&&module.exports&&(module.exports=Sha256),"function"==typeof define&&define.amd&&define([],function(){return Sha256});var _uid=(new Date).getTime(),Charon=angular.module("Charon",["angular-sortable-view"]);(location.pathname.length>1||location.search.length||location.hash.length<2)&&(location.href="/#/"),$(document).on("mouseover","[data-toggle=popover]",function(){$(this).data("bs.popover")||($(this).popover({placement:"top",delay:{show:700,hide:100},trigger:"hover"}),$(this).trigger("mouseover"))}),Charon.controller("Home",function($scope,$http,$location,$timeout){$scope.loader=!1,$scope.success="",$scope.error="",$scope.has_changed=!1,$scope.object_hash=!1,$scope.icons=["fa-key","fa-terminal","fa-database","fa-lock","fa-rocket","fa-truck","fa-envelope-square","fa-book","fa-heartbeat","fa-certificate","fa-expeditedssl","fa-slack","fa-wordpress","fa-linux","fa-apple","fa-android","fa-amazon","fa-windows","fa-instagram","fa-dropbox","fa-google-plus-square","fa-facebook-square","fa-twitter","fa-yelp","fa-ban"],$scope.timeouts={},$scope.query="",$scope.index={},$scope.reset_object=function(){$scope.object={id:"",name:"",note:"",items:[]},$scope.add_item(),$scope.has_changed=!1,$scope.object_hash=md5(JSON.stringify($scope.object))},$scope.clear_messages=function(){$scope.error=$scope.success=""},$scope.add_item=function(){$scope.object.items.push({_id:unique_id(),icon:"fa-key",title:"",user:"",pass:"",note:""})},$scope.remove_item=function(key){$scope.object.items.splice(key,1)},$scope.highlight=function($event){setTimeout(function(){$($event.target).select()},10)},$scope.set_mask=function($event,mask){$event.target.type=type},$scope.load_index=function(){$http.get("/_index").success(function(data){$scope.index=decrypt(data,localStorage.pass)}).error(function(data,code){return 401==code?void location.reload():void($scope.error=data)})},$scope.save_object=function(){$scope.toggle_loader(!0),$scope.clear_messages();var enc_obj=encrypt($scope.object,localStorage.pass);$http.post("/"+$scope.object.id,enc_obj).success(function(data){$scope.object=decrypt(data,localStorage.pass),location.hash="#/"+$scope.object.id,$scope.load_index(),$scope.toggle_loader(!1),$scope.has_changed=!1,$scope.object_hash=md5(JSON.stringify($scope.object)),$scope.success="Successfully saved the object"}).error(function(data,code){return 401==code?void location.reload():($scope.error=data,void $scope.toggle_loader(!1))})},$scope.delete_object=function(){$scope.toggle_loader(!0),$scope.clear_messages(),$http.delete("/"+$scope.object.id).success(function(data){$scope.success=data,$scope.reset_object(),$scope.load_index(),$scope.toggle_loader(!1)}).error(function(data,code){return 401==code?void location.reload():($scope.error=data,void $scope.toggle_loader(!1))})},$scope.load_object=function(){$scope.toggle_loader(!0),$scope.clear_messages();var path=get_path();return"/"==path?($scope.toggle_loader(!1),void $scope.reset_object()):void $http.get(path).success(function(data){var dec_obj=decrypt(data,localStorage.pass);dec_obj.items.map(function(item){void 0===item._id&&(delete item.$$hashKey,item._id=unique_id()),item.icon=item.icon&&item.icon.length?item.icon:"fa-key"}),$scope.object=dec_obj,$scope.object_hash=md5(JSON.stringify($scope.object)),$scope.has_changed=!1,$scope.toggle_loader(!1)}).error(function(data,code){return 401==code?void location.reload():($scope.error=data,$scope.toggle_loader(!1),void $scope.reset_object())})},$scope.toggle_loader=function(toggle){toggle?$scope.timeouts.loader=$timeout(function(){$scope.loader=!0},200):($scope.loader=!1,$timeout.cancel($scope.timeouts.loader),window.scrollTo(0,0))},$scope.logout=function(){$http.get("/logout").success(function(){location.reload()}).error(function(){location.reload()})},$scope.generate_password=function(index){for(var chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@#$%^&*_-?",pass="",i=0;i<16;i++){var key=Math.floor(Math.random()*chars.length);pass+=chars[key]}$scope.object.items[index].pass=pass},$scope.search=function(id){if($scope.query.length<3)return!0;var regexp=new RegExp($scope.query.replace(" ",".*"),"i");if(null!==$scope.index[id].name.match(regexp))return!0;if(void 0!==$scope.index[id].meta)for(var i in $scope.index[id].meta)if($scope.index[id].meta[i].match&&null!==$scope.index[id].meta[i].match(regexp))return!0;return!1},$scope.field_match=function(value){if(!$scope.query.length)return!1;var regexp=new RegExp($scope.query.replace(" ",".*"),"i");return null!==value.match(regexp)},$scope.navigate=function($event,key){return key===!1?38!==$event.keyCode&&40!==$event.keyCode||void 0===$scope.index[0]||(location.hash="/"+$scope.index[0].id):38===$event.keyCode?(key=void 0!==$scope.index[key-1]?key--:$scope.index.length-1,$location.hash="/"+$scope.index[key].id):40===$event.keyCode&&(key=void 0!==$scope.index[key+1]?key++:0,$location.hash="/"+$scope.index[key].id),!1},$scope.load_timeout=function(){$scope.load_index(),$scope.timeouts.index=$timeout($scope.load_timeout,36e5)},$scope.load_timeout(),$scope.$on("$locationChangeStart",function(e){$scope.has_changed&&(window.confirm("It looks like you have been editing something. Would you like to leave anyway?")||(e.preventDefault(),"activeElement"in document&&document.activeElement.blur()))}),$scope.$on("$locationChangeSuccess",function(){$scope.load_object()}),$scope.$watch("object",function(){if($scope.object_hash){var hash=md5(JSON.stringify($scope.object));$scope.has_changed=$scope.object_hash!==hash}},!0),get_cookie("PHPSESSID")||$scope.logout(),window.addEventListener("beforeunload",function(e){if($scope.has_changed){var confirmationMessage="It looks like you have been editing something. If you leave before saving, your changes will be lost.";return(e||window.event).returnValue=confirmationMessage,confirmationMessage}})}),$(document).on("focus",".password-mask",function(){$(this).attr("type","text")}),$(document).on("blur",".password-mask",function(){$(this).attr("type","password")}),$(document).on("keyup",function(e){if(!e.target.value)switch(e.keyCode){case 27:document.activeElement&&document.activeElement.blur();break;case 191:$("#search").focus()}}),$(document).on("keyup","#search",function(e){13===e.keyCode&&$(".nav-sidebar a[href]").eq(1).trigger("click")});