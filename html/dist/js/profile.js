var profileApp=new Vue({el:"#locker-app",data:{loader:!0,success:"",error:"",changePass1:"",changePass2:"",profile:{},timeouts:{}},created:function(){var scope=this;$.get({url:"/profile",success:function(result){scope.profile=$.extend(scope.profile,json_decode(result)),scope.toggleLoader(!1)}})},computed:{passwordChange:function(){return this.changePass1.length>0&&this.changePass2.length>0},passwordVerify:function(){return 0===this.changePass1.length||this.changePass1.length>12},passwordsMatch:function(){return 0===this.changePass1.length||this.changePass1===this.changePass2}},methods:{clearMessages:function(){this.error=this.success=""},saveObject:function(){var scope=this;if(scope.passwordChange){if(!scope.passwordsMatch)return void(scope.error="Passwords do not match.");UserKeychain.setPassword(scope.changePass1),scope.profile.passhash=UserKeychain.PassHash,scope.profile.contentKeyEncrypted=UserKeychain.getContentKeyEncrypted()}scope.clearMessages(),scope.toggleLoader(!0),$.post({url:"/profile",data:json_encode(scope.profile),success:function(result){scope.success="Successfully updated your profile!",scope.profile=$.extend(scope.profile,json_decode(result)),scope.changePass1="",scope.changePass2="",scope.toggleLoader(!1),UserKeychain.saveToStorage()},error:function(jqXHR){scope.error=jqXHR.responseText,scope.toggleLoader(!1)}})},toggleLoader:function(toggle){var self=this;toggle?self.timeouts.loader=setTimeout(function(){self.loader=!0},200):(self.loader=!1,clearTimeout(self.timeouts.loader),window.scrollTo(0,0))}}});